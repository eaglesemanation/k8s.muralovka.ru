---
- name: Ensure user exists
  become: true
  ansible.builtin.user:
    state: present
    name: 'k8s'
    password: "{{ nfs_pass | password_hash('sha512', 65534 | random(seed=inventory_hostname) | string) }}"

- name: Ensure share path exists
  become: true
  ansible.builtin.file:
    state: directory
    path: "{{ nfs_share_path }}"
    mode: '0755'
    owner: 'k8s'
    group: 'k8s'
